<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Evangelism Training</title>
    <link rel="stylesheet" href="./../styles.css">
    <link rel="favicon" href="favicon.ico" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Belanosima:wght@400;600;700&family=Fredericka+the+Great&display=swap" rel="stylesheet">
    <script src='https://kit.fontawesome.com/fedaa0c557.js' crossorigin='anonymous'></script>


<script>

const quizData = [
    {
        "questionNo": 1,
        "question": "What questions does the book of Genesis seek to answer?",
        "options": ["Historical", "Scientific", "Theological"],
        "answer": ["Theological"],
        "correctMessage": "That's right—Genesis is primarily about theological questions.",
    },
    {
        "questionNo": 2,
        "question": "What words accurately describe the way in which God creates?",
        "options": ["Lovingly", "Recklessly", "Powerfully", "Randomly"],
        "answer": ["Lovingly", "Powerfully"],
        "correctMessage": "Yes. That's correct.",
    },
    {
        "questionNo": 3,
        "question": "What phrase conveys the special place of humanity in the universe?",
        "options": ["Made in God's image", "Created first", "Made stronger than anything else"],
        "answer": ["Made in God's image"],
        "correctMessage": "Yes—the Bible portrays humans as special as they are made in God's own image.",
    },
] 

var currentQuestion = 0
var checkedOptions = []

const handleProgressClick = () => {
    const allCorrect = checkedOptions.every((thing) => quizData[currentQuestion].answer.includes(thing));
    const checkingAnswer = document.getElementById("nextButton").innerHTML === "Check Answer"
    const tryingAgain = document.getElementById("nextButton").innerHTML === "Try Again" 
    const nextQuestion = document.getElementById("nextButton").innerHTML === "Next Question" 
    const finishingQuiz = document.getElementById("nextButton").innerHTML === "Finish Quiz" 
    const correctAnswerLength = checkedOptions.length === quizData[currentQuestion].answer.length;
    const finalQuestion = currentQuestion === quizData.length-1;
    if(!allCorrect && checkingAnswer) {
        document.getElementById("nextButton").innerHTML = "Try Again";
        checkedOptions.forEach((thing) => {
            if(quizData[currentQuestion].answer.includes(thing)) {
                document.getElementById(thing).style.backgroundColor = "gold";
            }
            else {
                document.getElementById(thing).style.backgroundColor = "rgb(255, 102, 102)";
            }
        })
    }
    if(tryingAgain) {
        document.getElementById("nextButton").innerHTML = "Check Answer";
        checkedOptions.forEach((thing) => {
            document.getElementById(thing).style.backgroundColor = "rgb(241, 241, 241)";
        });
        refreshQuestions();
    }
    if(correctAnswerLength && allCorrect && checkingAnswer) {
        document.getElementById("correctMessage").style.display = "";
        checkedOptions.forEach((thing) => {
            document.getElementById(thing).style.backgroundColor = "rgb(0, 255, 153)";
        })
        if(finalQuestion) {
            document.getElementById("nextButton").innerHTML = "Finish Quiz";
        }
        else {
            document.getElementById("nextButton").innerHTML = "Next Question";
        }
    }
    if(nextQuestion) {
        currentQuestion++;
        document.getElementById("correctMessage").style.display = "none";
        refreshQuestions()
        document.getElementById("nextButton").innerHTML = "Check Answer";
    }
    if(finishingQuiz) {
        checkedOptions = [];
        document.getElementById("unfinishedQuix").style.display = "none";
        document.getElementById("quizCompleteMsgContainer").style.display = "";
    }
}

const refreshQuestions = function() {
    checkedOptions = [];
    document.getElementById("options").innerHTML = "";
    document.getElementById("questionNo").innerHTML = quizData[currentQuestion].questionNo;
    document.getElementById("question").innerHTML = quizData[currentQuestion].question;
    document.getElementById("correctMessage").innerHTML = quizData[currentQuestion].correctMessage;
    quizData[currentQuestion].options.forEach((thing) => {
        var newOption = document.createElement('div');
        newOption.innerHTML = thing;
        newOption.setAttribute("id", thing);
        newOption.setAttribute("class", "optionButton");
        newOption.onclick = () => {
            if(checkedOptions.includes(thing)) {
                checkedOptions = checkedOptions.filter(item => item !== thing);
                newOption.removeAttribute("class", "optionButtonSelected");
                newOption.setAttribute("class", "optionButton");
            }
            else {
                checkedOptions.push(thing);
                newOption.removeAttribute("class", "optionButton");
                newOption.setAttribute("class", "optionButtonSelected");
            }
        }
        document.getElementById("options").appendChild(newOption)
    })
}            

window.onload = function() {
    refreshQuestions()
    document.getElementById("totalQuestions").innerHTML = quizData.length;
    document.getElementById("nextButton").innerHTML = "Check Answer";
    document.getElementById("correctMessage").style.display = "none";
    document.getElementById("quizCompleteMsgContainer").style.display = "none";
    }            

</script>

</head>

<body>
    <div class="mainContainer">
        <a href="/"><div class="navHeader"><i class="fa-regular fa-comments" style="margin-right: 20px;"></i>Evangelism Training</div></a>
        <div class="moduleHeader">
        <div>The Gospel</div>
        <div class="lessonProgressLine">Part 1 of 4</div>
        </div>
        <div class="lessonHeader">God our maker</div>
        <div style="position:relative;padding-top:56.25%;">
            <iframe frameborder="0" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;"
            src="https://www.youtube.com/embed/pM1Ftz4wXh8?autoplay=1&mute=1">
            </iframe>
        </div>
        <div id="quizContainer">
            <div class="quizLabel">Quiz</div>
            <div id="questionNoLine">Question <span id="questionNo"></span> of <span id="totalQuestions"></span></div>
            <div id="question"></div>
            <div style="flex-direction: column;">
            <div id="options"></div>
            </div>
            <div id="correctMessage"></div>
            <div id="nextButton" onclick="handleProgressClick()"></div>
            <div id="quizCompleteMsgContainer">
                <div class="quizLabel">Nice work!</div>
                <div class="nextModuleButton"><a href="./god-our-enemy.html">Next Module</a</div>
            </div>
        </div>
        
    </div>
</body>

</html>